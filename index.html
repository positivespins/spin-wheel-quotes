<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Analytics: GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7ZKTCD8FW4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-7ZKTCD8FW4');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Spin for Motivation</title>

  <!-- âœ… Style -->
  <link rel="stylesheet" href="style.css" />

  <!-- âœ… PWA Manifest -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#4CAF50" />

  <!-- âœ… Apple iOS App Icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="icon-192.png" />

  <!-- âœ… Favicon -->
  <link rel="icon" type="image/png" href="icon-192.png" />
</head>
<body>
  <div class="container">
    <h1>ğŸš€ Your Daily Motivation</h1>

    <input 
      type="text" 
      id="username" 
      placeholder="Enter your name" 
      autocomplete="off" 
      autofocus 
    />

    <button onclick="showQuote()">ğŸ¯ Get Quote</button>

    <div id="quote"></div>

    <div class="actions">
      <button onclick="copyQuote()">ğŸ“‹ Copy</button>
      <button onclick="shareQuote()">ğŸ“¤ Share</button>
      <button id="notifyBtn">ğŸ”” Enable Notifications</button>
    </div>

    <canvas id="confetti-canvas"></canvas>
  </div>

  <!-- âœ… OneSignal Push Notifications -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function(OneSignal) {
      await OneSignal.init({
        appId: "342512e9-bd1e-46ea-95c7-4889d82a4a78",
      });
    });

    // âœ… Show push prompt only once per day
    document.getElementById("notifyBtn").addEventListener("click", function() {
      const lastShown = localStorage.getItem("pushPromptShown");
      const now = Date.now();
      const oneDay = 24 * 60 * 60 * 1000; // 1 day in ms

      if (!lastShown || now - lastShown > oneDay) {
        OneSignalDeferred.push(function(OneSignal) {
          OneSignal.Slidedown.promptPush();
        });
        localStorage.setItem("pushPromptShown", now);
      } else {
        alert("âœ… Notifications already enabled or prompt shown today.");
      }
    });
  </script>

  <!-- âœ… App JS -->
  <script src="confetti.js"></script>
  <script src="script.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log('âœ… Service Worker Registered'))
        .catch(err => console.error('âŒ Service Worker Error', err));
    }
  </script>
</body>
</html>
